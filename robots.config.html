<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuration du fichier robots.txt</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- FontAwesome CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h1 class="fw-bold mb-4">Configuration du fichier <code>robots.txt</code></h1>
    <p>
      Configurez les règles d'indexation pour les moteurs de recherche directement depuis cette interface. Vous pouvez ajouter, modifier ou supprimer des directives pour contrôler quelles pages ou sections de votre site doivent être indexées.
    </p>

    <!-- Formulaire pour ajouter des directives -->
    <div class="mb-4">
      <h3 class="h5">Ajouter une Directive</h3>
      <form id="addDirectiveForm">
        <div class="row g-2">
          <div class="col-md-4">
            <label for="userAgent" class="form-label">User-Agent</label>
            <input type="text" id="userAgent" class="form-control" placeholder="Exemple : *" value="*" required>
          </div>
          <div class="col-md-4">
            <label for="directiveType" class="form-label">Directive</label>
            <select id="directiveType" class="form-select" required>
              <option value="Disallow">Disallow</option>
              <option value="Allow">Allow</option>
              <option value="Crawl-delay">Crawl-delay</option>
              <option value="Sitemap">Sitemap</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="directiveValue" class="form-label">Valeur</label>
            <input type="text" id="directiveValue" class="form-control" placeholder="Exemple : /admin/" required>
          </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Ajouter</button>
      </form>
    </div>

    <!-- Liste des directives -->
    <h3 class="h5">Directives Actuelles</h3>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>User-Agent</th>
            <th>Directive</th>
            <th>Valeur</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="directiveTable">
          <!-- Les directives seront ajoutées dynamiquement ici -->
        </tbody>
      </table>
    </div>

    <!-- Bouton pour générer le fichier robots.txt -->
    <div class="text-end">
      <button id="generateRobots" class="btn btn-success">Générer le fichier robots.txt</button>
    </div>

    <!-- Affichage du contenu du fichier robots.txt -->
    <div class="mt-4">
      <h3 class="h5">Contenu du fichier robots.txt</h3>
      <pre id="robotsContent" class="bg-light p-3 border rounded"></pre>
    </div>
  </div>

  <!-- Script jQuery -->
  <script>
    $(document).ready(function () {
      const directives = [];

      // Ajouter une directive
      $('#addDirectiveForm').on('submit', function (e) {
        e.preventDefault();
        const userAgent = $('#userAgent').val();
        const directiveType = $('#directiveType').val();
        const directiveValue = $('#directiveValue').val();

        // Ajouter à la liste des directives
        directives.push({ userAgent, directiveType, directiveValue });
        renderDirectives();
      });

      // Rendre les directives dans le tableau
      function renderDirectives() {
        const tableBody = $('#directiveTable');
        tableBody.empty();
        directives.forEach((directive, index) => {
          tableBody.append(`
            <tr>
              <td>${directive.userAgent}</td>
              <td>${directive.directiveType}</td>
              <td>${directive.directiveValue}</td>
              <td>
                <button class="btn btn-sm btn-danger" onclick="deleteDirective(${index})"><i class="fas fa-trash"></i> Supprimer</button>
              </td>
            </tr>
          `);
        });
      }

      // Supprimer une directive
      window.deleteDirective = function (index) {
        directives.splice(index, 1);
        renderDirectives();
      };

      // Générer le contenu du fichier robots.txt
      $('#generateRobots').on('click', function () {
        let robotsText = '';
        directives.forEach(directive => {
          robotsText += `User-Agent: ${directive.userAgent}\n${directive.directiveType}: ${directive.directiveValue}\n\n`;
        });
        $('#robotsContent').text(robotsText.trim());
      });
    });
  </script>
</body>
</html>