<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des Articles de Blog - BoostifySEO</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- FontAwesome CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h1 class="fw-bold mb-4">Gestion des Articles de Blog</h1>

    <!-- Bouton pour ajouter un nouvel article -->
    <div class="mb-4">
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addArticleModal">
        <i class="fas fa-plus"></i> Ajouter un Article
      </button>
    </div>

    <!-- Tableau des Articles -->
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Vues</th>
            <th>Date de Publication</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="articlesTable">
          <!-- Articles ajoutés dynamiquement ici -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal pour Ajouter un Article -->
  <div class="modal fade" id="addArticleModal" tabindex="-1" aria-labelledby="addArticleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addArticleModalLabel">Ajouter un Nouvel Article</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="addArticleForm">
            <div class="mb-3">
              <label for="articleTitle" class="form-label">Titre de l'Article</label>
              <input type="text" class="form-control" id="articleTitle" placeholder="Entrez le titre" required>
            </div>
            <div class="mb-3">
              <label for="articleAuthor" class="form-label">Auteur</label>
              <input type="text" class="form-control" id="articleAuthor" placeholder="Nom de l'auteur" required>
            </div>
            <div class="mb-3">
              <label for="articleDate" class="form-label">Date de Publication</label>
              <input type="date" class="form-control" id="articleDate" required>
            </div>
            <div class="mb-3">
              <label for="articleViews" class="form-label">Vues (facultatif)</label>
              <input type="number" class="form-control" id="articleViews" placeholder="0" min="0">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
          <button type="submit" class="btn btn-primary" id="saveArticleBtn">Enregistrer</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Script jQuery -->
  <script>
    $(document).ready(function () {
      let articles = [];

      // Ajouter un article
      $('#saveArticleBtn').on('click', function () {
        const title = $('#articleTitle').val();
        const author = $('#articleAuthor').val();
        const date = $('#articleDate').val();
        const views = $('#articleViews').val() || 0;

        if (title && author && date) {
          const newArticle = {
            id: articles.length + 1,
            title,
            author,
            views: parseInt(views),
            date
          };
          articles.push(newArticle);
          updateArticlesTable();
          $('#addArticleModal').modal('hide');
          $('#addArticleForm')[0].reset();
        }
      });

      // Mettre à jour le tableau des articles
      function updateArticlesTable() {
        const tableBody = $('#articlesTable');
        tableBody.empty();

        articles.forEach((article, index) => {
          tableBody.append(`
            <tr>
              <td>${index + 1}</td>
              <td>${article.title}</td>
              <td>${article.author}</td>
              <td>${article.views}</td>
              <td>${article.date}</td>
              <td>
                <button class="btn btn-sm btn-primary me-2" onclick="editArticle(${index})"><i class="fas fa-edit"></i> Modifier</button>
                <button class="btn btn-sm btn-danger" onclick="deleteArticle(${index})"><i class="fas fa-trash"></i> Supprimer</button>
              </td>
            </tr>
          `);
        });
      }

      // Supprimer un article
      window.deleteArticle = function (index) {
        if (confirm('Voulez-vous vraiment supprimer cet article ?')) {
          articles.splice(index, 1);
          updateArticlesTable();
        }
      };

      // Modifier un article
      window.editArticle = function (index) {
        const article = articles[index];
        $('#articleTitle').val(article.title);
        $('#articleAuthor').val(article.author);
        $('#articleDate').val(article.date);
        $('#articleViews').val(article.views);
        $('#saveArticleBtn').off('click').on('click', function () {
          articles[index] = {
            ...article,
            title: $('#articleTitle').val(),
            author: $('#articleAuthor').val(),
            date: $('#articleDate').val(),
            views: parseInt($('#articleViews').val())
          };
          updateArticlesTable();
          $('#addArticleModal').modal('hide');
          $('#addArticleForm')[0].reset();
        });
        $('#addArticleModal').modal('show');
      };
    });
  </script>
</body>
</html>